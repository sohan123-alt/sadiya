<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventory Management System</title>
    <!-- Bootstrap CSS for responsive design and components -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        /* Custom CSS styles for the application */
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: 'Arial', sans-serif;
        }

        /* Styling for main containers */
        .auth-container {
            max-width: 400px;
            margin: 100px auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 40px;
        }

        .dashboard-container {
            margin: 20px auto;
            max-width: 1200px;
        }

        /* Header styling for forms */
        .form-header {
            text-align: center;
            margin-bottom: 30px;
            color: #333;
        }

        /* Custom button styling */
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 25px;
            padding: 12px 30px;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        /* Navigation bar styling */
        .navbar {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
        }

        /* Table styling */
        .table-container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        /* Hide sections by default */
        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        /* Alert styling */
        .alert {
            border-radius: 10px;
        }

        /* Form input styling */
        .form-control {
            border-radius: 10px;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
        }

        .form-control:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
        }

        /* Modal styling */
        .modal-content {
            border-radius: 15px;
        }

        .modal-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px 15px 0 0;
        }

        /* Statistics cards styling */
        .stat-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            color: #666;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
    </style>
</head>

<body>
    <!-- SIGNUP SECTION -->
    <!-- This section contains the user registration form -->
    <div id="signup-section" class="section active">
        <div class="auth-container">
            <div class="form-header">
                <i class="fas fa-user-plus fa-3x text-primary mb-3"></i>
                <h2>Create Account</h2>
                <p class="text-muted">Join our inventory management system</p>
            </div>
            <!-- Signup form with validation -->
            <form id="signup-form">
                <div class="mb-3">
                    <label for="signup-username" class="form-label">Username</label>
                    <input type="text" class="form-control" id="signup-username" required>
                </div>
                <div class="mb-3">
                    <label for="signup-email" class="form-label">Email</label>
                    <input type="email" class="form-control" id="signup-email" required>
                </div>
                <div class="mb-3">
                    <label for="signup-password" class="form-label">Password</label>
                    <input type="password" class="form-control" id="signup-password" required>
                </div>
                <button type="submit" class="btn btn-primary w-100">
                    <i class="fas fa-user-plus me-2"></i>Sign Up
                </button>
            </form>
            <!-- Link to switch to login -->
            <div class="text-center mt-3">
                <p class="mb-0">Already have an account?
                    <a href="#" id="show-login" class="text-primary">Login here</a>
                </p>
            </div>
        </div>
    </div>

    <!-- LOGIN SECTION -->
    <!-- This section contains the user login form -->
    <div id="login-section" class="section">
        <div class="auth-container">
            <div class="form-header">
                <i class="fas fa-sign-in-alt fa-3x text-primary mb-3"></i>
                <h2>Welcome Back</h2>
                <p class="text-muted">Sign in to manage your inventory</p>
            </div>
            <!-- Alert container for login messages -->
            <div id="login-alert" class="alert" style="display: none;"></div>
            <!-- Login form -->
            <form id="login-form">
                <div class="mb-3">
                    <label for="login-username" class="form-label">Username</label>
                    <input type="text" class="form-control" id="login-username" required>
                </div>
                <div class="mb-3">
                    <label for="login-password" class="form-label">Password</label>
                    <input type="password" class="form-control" id="login-password" required>
                </div>
                <button type="submit" class="btn btn-primary w-100">
                    <i class="fas fa-sign-in-alt me-2"></i>Login
                </button>
            </form>
            <!-- Link to switch to signup -->
            <div class="text-center mt-3">
                <p class="mb-0">Don't have an account?
                    <a href="#" id="show-signup" class="text-primary">Sign up here</a>
                </p>
            </div>
        </div>
    </div>

    <!-- DASHBOARD SECTION -->
    <!-- This is the main application interface after login -->
    <div id="dashboard-section" class="section">
        <!-- Navigation bar -->
        <nav class="navbar navbar-expand-lg navbar-dark">
            <div class="container-fluid">
                <a class="navbar-brand" href="#">
                    <i class="fas fa-boxes me-2"></i>Inventory System
                </a>
                <div class="navbar-nav ms-auto">
                    <span class="navbar-text me-3">Welcome, <span id="current-user"></span>!</span>
                    <button class="btn btn-outline-light btn-sm" id="logout-btn">
                        <i class="fas fa-sign-out-alt me-1"></i>Logout
                    </button>
                </div>
            </div>
        </nav>

        <div class="dashboard-container">
            <!-- Statistics Dashboard -->
            <div class="row mb-4">
                <div class="col-md-3">
                    <div class="stat-card">
                        <div class="stat-value" id="total-items">0</div>
                        <div class="stat-label">Total Items</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stat-card">
                        <div class="stat-value" id="low-stock">0</div>
                        <div class="stat-label">Low Stock</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stat-card">
                        <div class="stat-value" id="total-value">$0</div>
                        <div class="stat-label">Total Value</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stat-card">
                        <div class="stat-value" id="categories">0</div>
                        <div class="stat-label">Categories</div>
                    </div>
                </div>
            </div>

            <!-- Inventory Table Container -->
            <div class="table-container">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h3><i class="fas fa-list me-2"></i>Inventory Items</h3>
                    <!-- Button to add new item -->
                    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addItemModal">
                        <i class="fas fa-plus me-2"></i>Add New Item
                    </button>
                </div>

                <!-- Search and Filter Controls -->
                <div class="row mb-3">
                    <div class="col-md-6">
                        <input type="text" class="form-control" id="search-input" placeholder="Search items...">
                    </div>
                    <div class="col-md-3">
                        <select class="form-control" id="category-filter">
                            <option value="">All Categories</option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <select class="form-control" id="stock-filter">
                            <option value="">All Stock Levels</option>
                            <option value="low">Low Stock (≤10)</option>
                            <option value="medium">Medium Stock (11-50)</option>
                            <option value="high">High Stock (>50)</option>
                        </select>
                    </div>
                </div>

                <!-- Inventory Table -->
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead class="table-primary">
                            <tr>
                                <th>ID</th>
                                <th>Item Name</th>
                                <th>Category</th>
                                <th>Quantity</th>
                                <th>Price</th>
                                <th>Total Value</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <!-- Table body will be populated by JavaScript -->
                        <tbody id="inventory-table-body">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- ADD/EDIT ITEM MODAL -->
    <!-- Modal dialog for adding new items or editing existing ones -->
    <div class="modal fade" id="addItemModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalTitle">Add New Item</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <!-- Form for item details -->
                    <form id="item-form">
                        <input type="hidden" id="item-id">
                        <div class="mb-3">
                            <label for="item-name" class="form-label">Item Name</label>
                            <input type="text" class="form-control" id="item-name" required>
                        </div>
                        <div class="mb-3">
                            <label for="item-category" class="form-label">Category</label>
                            <input type="text" class="form-control" id="item-category" required>
                        </div>
                        <div class="mb-3">
                            <label for="item-quantity" class="form-label">Quantity</label>
                            <input type="number" class="form-control" id="item-quantity" min="0" required>
                        </div>
                        <div class="mb-3">
                            <label for="item-price" class="form-label">Price ($)</label>
                            <input type="number" class="form-control" id="item-price" step="0.01" min="0" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="save-item-btn">Save Item</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS for interactive components -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>

    <script>
        // ===== DATA MANAGEMENT =====
        // This section handles all data storage and retrieval using JSON in memory

        // Sample user data - in a real app this would be in a database
        let users = [
            { id: 1, username: 'admin', email: 'admin@example.com', password: 'admin123' }
        ];

        // Sample inventory data - this simulates a JSON database
        let inventory = [
            { id: 1, name: 'Laptop Computer', category: 'Electronics', quantity: 25, price: 899.99 },
            { id: 2, name: 'Office Chair', category: 'Furniture', quantity: 8, price: 149.99 },
            { id: 3, name: 'Wireless Mouse', category: 'Electronics', quantity: 45, price: 29.99 },
            { id: 4, name: 'Desk Lamp', category: 'Furniture', quantity: 12, price: 39.99 },
            { id: 5, name: 'Notebook Set', category: 'Stationery', quantity: 100, price: 12.99 }
        ];

        // Current logged-in user
        let currentUser = null;

        // Counter for generating new item IDs
        let nextItemId = inventory.length > 0 ? Math.max(...inventory.map(item => item.id)) + 1 : 1;

        // ===== UTILITY FUNCTIONS =====
        // These functions handle common operations throughout the app

        // Function to show specific section and hide others
        function showSection(sectionId) {
            // Hide all sections first
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            // Show the requested section
            document.getElementById(sectionId).classList.add('active');
        }

        // Function to show alert messages
        function showAlert(message, type = 'danger', containerId = 'login-alert') {
            const alertContainer = document.getElementById(containerId);
            alertContainer.className = `alert alert-${type}`;
            alertContainer.textContent = message;
            alertContainer.style.display = 'block';
            // Auto-hide alert after 3 seconds
            setTimeout(() => {
                alertContainer.style.display = 'none';
            }, 3000);
        }

        // ===== AUTHENTICATION FUNCTIONS =====
        // These functions handle user registration and login

        // Handle user signup
        function handleSignup(event) {
            event.preventDefault(); // Prevent form submission

            // Get form data
            const username = document.getElementById('signup-username').value;
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;

            // Check if username already exists
            if (users.find(user => user.username === username)) {
                showAlert('Username already exists!', 'danger');
                return;
            }

            // Create new user
            const newUser = {
                id: users.length + 1,
                username: username,
                email: email,
                password: password
            };

            // Add to users array (simulating database storage)
            users.push(newUser);

            // Show success message and switch to login
            showAlert('Account created successfully! Please login.', 'success');
            setTimeout(() => {
                showSection('login-section');
            }, 1500);

            // Reset form
            document.getElementById('signup-form').reset();
        }

        // Handle user login
        function handleLogin(event) {
            event.preventDefault(); // Prevent form submission

            // Get login credentials
            const username = document.getElementById('login-username').value;
            const password = document.getElementById('login-password').value;

            // Find user in database
            const user = users.find(u => u.username === username && u.password === password);

            if (user) {
                // Login successful
                currentUser = user;
                document.getElementById('current-user').textContent = user.username;
                showSection('dashboard-section');
                updateDashboard(); // Refresh dashboard data
            } else {
                // Login failed
                showAlert('Invalid username or password!', 'danger', 'login-alert');
            }

            // Reset form
            document.getElementById('login-form').reset();
        }

        // Handle logout
        function handleLogout() {
            currentUser = null;
            showSection('login-section');
        }

        // ===== INVENTORY MANAGEMENT FUNCTIONS =====
        // These functions handle CRUD operations for inventory items

        // Function to render inventory table
        function renderInventoryTable(items = inventory) {
            const tableBody = document.getElementById('inventory-table-body');

            // Clear existing rows
            tableBody.innerHTML = '';

            // If no items to show
            if (items.length === 0) {
                tableBody.innerHTML = `
                    <tr>
                        <td colspan="7" class="text-center text-muted">No items found</td>
                    </tr>
                `;
                return;
            }

            // Create table rows for each item
            items.forEach(item => {
                const row = document.createElement('tr');

                // Determine stock level class for styling
                let stockClass = '';
                if (item.quantity <= 10) stockClass = 'text-danger';
                else if (item.quantity <= 50) stockClass = 'text-warning';
                else stockClass = 'text-success';

                // Create row HTML
                row.innerHTML = `
                    <td>${item.id}</td>
                    <td>${item.name}</td>
                    <td><span class="badge bg-secondary">${item.category}</span></td>
                    <td><span class="${stockClass}">${item.quantity}</span></td>
                    <td>$${item.price.toFixed(2)}</td>
                    <td>$${(item.quantity * item.price).toFixed(2)}</td>
                    <td>
                        <button class="btn btn-sm btn-outline-primary me-1" onclick="editItem(${item.id})" title="Edit">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-sm btn-outline-danger" onclick="deleteItem(${item.id})" title="Delete">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;

                tableBody.appendChild(row);
            });
        }

        // Function to update dashboard statistics
        function updateDashboard() {
            // Calculate total items
            const totalItems = inventory.length;
            document.getElementById('total-items').textContent = totalItems;

            // Calculate low stock items (quantity <= 10)
            const lowStock = inventory.filter(item => item.quantity <= 10).length;
            document.getElementById('low-stock').textContent = lowStock;

            // Calculate total value
            const totalValue = inventory.reduce((sum, item) => sum + (item.quantity * item.price), 0);
            document.getElementById('total-value').textContent = `$${totalValue.toFixed(2)}`;

            // Calculate unique categories
            const categories = [...new Set(inventory.map(item => item.category))].length;
            document.getElementById('categories').textContent = categories;

            // Update table and filters
            renderInventoryTable();
            updateCategoryFilter();
        }

        // Function to update category filter dropdown
        function updateCategoryFilter() {
            const categoryFilter = document.getElementById('category-filter');
            const categories = [...new Set(inventory.map(item => item.category))];

            // Clear existing options except "All Categories"
            categoryFilter.innerHTML = '<option value="">All Categories</option>';

            // Add category options
            categories.forEach(category => {
                const option = document.createElement('option');
                option.value = category;
                option.textContent = category;
                categoryFilter.appendChild(option);
            });
        }

        // Function to add new item
        function addItem(itemData) {
            const newItem = {
                id: nextItemId++,
                name: itemData.name,
                category: itemData.category,
                quantity: parseInt(itemData.quantity),
                price: parseFloat(itemData.price)
            };

            inventory.push(newItem);
            updateDashboard();
        }

        // Function to edit existing item
        function editItem(id) {
            const item = inventory.find(item => item.id === id);
            if (!item) return;

            // Populate modal form with item data
            document.getElementById('modalTitle').textContent = 'Edit Item';
            document.getElementById('item-id').value = item.id;
            document.getElementById('item-name').value = item.name;
            document.getElementById('item-category').value = item.category;
            document.getElementById('item-quantity').value = item.quantity;
            document.getElementById('item-price').value = item.price;

            // Show modal
            const modal = new bootstrap.Modal(document.getElementById('addItemModal'));
            modal.show();
        }

        // Function to update existing item
        function updateItem(id, itemData) {
            const itemIndex = inventory.findIndex(item => item.id === id);
            if (itemIndex !== -1) {
                inventory[itemIndex] = {
                    id: id,
                    name: itemData.name,
                    category: itemData.category,
                    quantity: parseInt(itemData.quantity),
                    price: parseFloat(itemData.price)
                };
                updateDashboard();
            }
        }

        // Function to delete item
        function deleteItem(id) {
            if (confirm('Are you sure you want to delete this item?')) {
                inventory = inventory.filter(item => item.id !== id);
                updateDashboard();
            }
        }

        // ===== SEARCH AND FILTER FUNCTIONS =====
        // These functions handle filtering and searching inventory items

        // Function to filter inventory based on search and filter criteria
        function filterInventory() {
            const searchTerm = document.getElementById('search-input').value.toLowerCase();
            const categoryFilter = document.getElementById('category-filter').value;
            const stockFilter = document.getElementById('stock-filter').value;

            let filteredItems = inventory.filter(item => {
                // Search filter
                const matchesSearch = item.name.toLowerCase().includes(searchTerm) ||
                    item.category.toLowerCase().includes(searchTerm);

                // Category filter
                const matchesCategory = !categoryFilter || item.category === categoryFilter;

                // Stock filter
                let matchesStock = true;
                if (stockFilter === 'low') matchesStock = item.quantity <= 10;
                else if (stockFilter === 'medium') matchesStock = item.quantity > 10 && item.quantity <= 50;
                else if (stockFilter === 'high') matchesStock = item.quantity > 50;

                return matchesSearch && matchesCategory && matchesStock;
            });

            renderInventoryTable(filteredItems);
        }

        // ===== EVENT LISTENERS =====
        // This section sets up all the event listeners for user interactions

        // Wait for DOM to be fully loaded before setting up event listeners
        document.addEventListener('DOMContentLoaded', function () {
            // Navigation event listeners
            document.getElementById('show-login').addEventListener('click', (e) => {
                e.preventDefault();
                showSection('login-section');
            });

            document.getElementById('show-signup').addEventListener('click', (e) => {
                e.preventDefault();
                showSection('signup-section');
            });

            // Form event listeners
            document.getElementById('signup-form').addEventListener('submit', handleSignup);
            document.getElementById('login-form').addEventListener('submit', handleLogin);
            document.getElementById('logout-btn').addEventListener('click', handleLogout);

            // Modal event listeners
            document.getElementById('addItemModal').addEventListener('hidden.bs.modal', function () {
                // Reset modal when closed
                document.getElementById('modalTitle').textContent = 'Add New Item';
                document.getElementById('item-form').reset();
                document.getElementById('item-id').value = '';
            });

            // Save item button event listener
            document.getElementById('save-item-btn').addEventListener('click', function () {
                const itemId = document.getElementById('item-id').value;
                const itemData = {
                    name: document.getElementById('item-name').value,
                    category: document.getElementById('item-category').value,
                    quantity: document.getElementById('item-quantity').value,
                    price: document.getElementById('item-price').value
                };

                // Validate form data
                if (!itemData.name || !itemData.category || !itemData.quantity || !itemData.price) {
                    alert('Please fill in all fields');
                    return;
                }

                if (itemId) {
                    // Update existing item
                    updateItem(parseInt(itemId), itemData);
                } else {
                    // Add new item
                    addItem(itemData);
                }

                // Close modal
                const modal = bootstrap.Modal.getInstance(document.getElementById('addItemModal'));
                modal.hide();
            });

            // Search and filter event listeners
            document.getElementById('search-input').addEventListener('input', filterInventory);
            document.getElementById('category-filter').addEventListener('change', filterInventory);
            document.getElementById('stock-filter').addEventListener('change', filterInventory);

            // Initialize dashboard if starting there
            updateDashboard();
        });

        // ===== GLOBAL FUNCTIONS =====
        // These functions need to be globally accessible for onclick events

        // Make functions globally accessible for HTML onclick attributes
        window.editItem = editItem;
        window.deleteItem = deleteItem;
    </script>
</body>

</html>